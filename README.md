# Database Agent with MCP

This project is an Autonomous Database Management Agent powered by the Model Context Protocol (MCP). It allows users to interact with a SQLite database using natural language, enabling complex operations like schema discovery, data entry, and conditional updates without writing a single line of SQL.
Below is the structured README.md for your project.

## ü§ñ MCP SQLite Database Manager
An intelligent database assistant that bridges the gap between natural language and SQL. Built using Google‚Äôs Model Context Protocol (MCP) and OpenAI's GPT-4o-mini, this agent can explore, query, and modify a SQLite database autonomously.

### üåü Features

- Natural Language to SQL: Convert conversational requests into valid SQLite queries automatically.
- Autonomous Tool Use: The agent intelligently decides when to list tables, check schemas, or execute data manipulations.
- ReAct Logic Loop: Supports multi-step reasoning. If a user asks to "add random rows," the agent first checks the schema, then constructs and executes the appropriate INSERT statements.
- Context Awareness: Remembers previous interactions to answer follow-up questions like "What about the other table?".
- Dynamic Schema Modification: Supports structural changes such as adding new columns and calculating values for them based on business logic.

## üèóÔ∏è Project Structure
- runner.py: The main entry point. It manages the MCP client session and the LLM communication loop.
- server.py: The MCP Server that exposes database tools to the LLM via the FastMCP framework.
- tools.py: Contains the core Python logic for SQLite interactions (Connect, Show, Info, Execute).
- client.py: A wrapper for the OpenAI API to handle chat completions.

## üöÄ Getting Started
### Prerequisites
- Python 3.10+
- OpenAI API Key

## Installation
Install the required dependencies:
```bash
pip install mcp openai anyio
```

Set your OpenAI API Key as an environment variable:
```bash
export OPENAI_API_KEY='your-key-here'
```

## Running the Agent
Simply run the runner script:
```bash
python runner.py
```

## üõ†Ô∏è Available Tools
The following tools are exposed to the LLM via the MCP server:
- list_database_tables: Returns a list of all tables in the database.
- get_table_schema: Provides column names and data types for a specific table.
- execute_query: Executes raw SQL commands generated by the LLM and returns the results.
 
## üìä Example Usage
Based on the project logs , the agent can handle complex workflows:
- Exploration: "show tables".
- Data Generation: "add 10 random but logical rows to students table".
- - Agent Action: Calls get_table_schema to understand the columns, then execute_query to insert data.
- Logical Operations: "flag the guys who has got worse than B".
- Structural Updates: "create a new column and add that information to it. i want to see who is passed and who is not".
- - Agent Action: Adds a status column and updates it to "Passed" or "Not Passed" based on the grade column.
